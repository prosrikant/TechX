<div class="searchPanel skill" ng-show="dashboard.showApproval">
    <div class="form-group no-margin skill-search col-sm-12">
        <div class="input-group search-by-project padding-bottom-10 col-sm-6">
            <input id="skillInput" placeholder="Search by skill or task description" class="form-control" ng-model="skillSearchBox.text" ng-change="refreshTasksBasedonInput()" />
            <span class="input-group-btn">
                <button class="btn btn-default no-border-left" type="button" ng-click="getTasksOnSearchClick()"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
            </span>
        </div>
    </div>
</div>

<div id="divCongrats" class="col-md-12 contributorTaskApp" ng-show="dashboard.showApproval" infinite-scroll='getTasks()' infinite-scroll-distance='0'>
    <div class="create-task-container background-color-fff" ng-show="divVisibiltyModel.showSuccess">
        <div class="new-task-box">
            <h3 class="dark-grey-blue font-size-24">Congratulations!</h3>
            <div class="gray-text font-size-16 opacity-normal">
                <div>You have requested permission for <span class="color-8e44ad">{{taskRequest.TaskName}}</span> under project <span class="color-8e44ad">{{taskRequest.ProjectName}}</span> for {{taskRequest.Hours}} hrs starting {{taskRequest.StartingDate}}.</div>
                <div>While you wait for your manager to get back, complete your <span class="color-8e44ad link" ng-click="NavigateToProfile()">Profile</span> for better task recommendations.</div>
            </div>
        </div>
    </div>
    <div class="no-padding-left-right margin-top-bottom-3 margin-top-4 col-sm-12" ng-repeat="task in tasks track by $index">

        <div class="col-md-12 col-sm-12 project-details" id="div{{$index}}">
            <div class="col-md-11 col-sm-11 no-padding">
                <div class="project-title col-md-12 margin-top-25 margin-bottom-25">
                    <span class="heading margin-top-24">{{task.ProjectName}}</span><span class="postedBy"> posted by </span> <span class="heading margin-top-24">{{task.FullName}}</span>
                    @*<div class="gray-text">4 days ago</div>*@
                </div>
                <div class="col-md-12 margin-bottom-25">
                    <div class="required-skills col-sm-2 col-md-2 pull-left no-padding">
                        <div class="heading">
                            <span class="skill-icon"><img src="/Content/Images/skill@2x.png" /></span>
                            <span class="role-desc dark-grey-blue">{{task.Skills}}</span>
                            <div class="gray-text">Required skills</div>
                        </div>
                    </div>
                    <div class="billable-hours col-sm-2 col-md-2 pull-left no-padding">
                        <div class="heading">
                            <span class="hours-icon"><img src="/Content/Images/hours@2x.png" /></span>
                            <span class="role-desc dark-grey-blue">{{task.Hours}} hours</span>
                            <div class="gray-text">Billable hours</div>
                        </div>
                    </div>
                    <div class="on-boarding-date col-sm-3 col-md-3 pull-left no-padding">
                        <div class="heading">
                            <span class="cal-icon"><img src="/Content/Images/calendar@2x.png" /></span>
                            <span class="role-desc dark-grey-blue">{{task.OnBoardingDate}}</span>
                            <div class="gray-text">Onboarding Date</div>
                        </div>
                    </div>
                    <div class="on-boarding-date col-sm-3 col-md-3 pull-left no-padding">
                        <div class="heading">
                            <span class="cal-icon"><img src="/Content/Images/calendar@2x.png" /></span>
                            <span class="role-desc dark-grey-blue">{{task.OnBoardingDate}}</span>
                            <div class="gray-text">Due Date</div>
                        </div>
                    </div>
                    <div class="awards-eligible col-sm-2 col-md-2 pull-left no-padding">
                        <div class="heading">
                            <span class="gift-icon pull-left"><img src="/Content/Images/gift@2x.png" /></span>
                            <span class="role-desc dark-grey-blue pull-left">
                                <span ng-show="task.GiftsOrAwards">Yes</span>
                                <span ng-show="!task.GiftsOrAwards">No</span>
                            </span>
                            <div class="gray-text clear-both">Awards Eligibility</div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="left-nav-circle-txt col-sm-1 col-md-1 pull-right margin-top-25 no-padding">
                <div class="left-nav-circle-txt-ProjectName pull-left">{{task.ShortName}}</div>
            </div>
            <div class="col-md-12 col-sm-12 no-padding">
                <div class="col-md-8 col-sm-8 no-padding margin-top-24">
                    <p class="project-desc">{{task.Details}}</p>
                </div>

                <div class="col-md-3 width300 col-sm-3 pull-right no-padding con_button_grup">
                    @*<div class="col-md-6 add-task-button margin-top-24 disabled" ng-show="task.IsApplied">Applied</div>*@
                    <div class="col-md-4 pull-right add-task-button apply-btn margin-top-24" ng-show="!task.IsApplied" ng-click="showReviewOptions($index);">Apply</div>

                    @*Only one of the below divs would be visible at a time*@
                    <div class="col-md-6 pull-right margin-top-12 no-padding" ng-show="task.IsRecommended && !task.IsApplied">
                        <div class="col-md-12 gift-pending back-ground-color-ffa942 no-padding margin-right-12">RECOMMENDED</div>
                    </div>
                    <div class="col-md-4 pull-right margin-top-12 no-padding" ng-show="task.IsApplied">
                        <div class="col-md-12 gift-pending back-ground-color-6dd5ab no-padding">APPLIED</div>
                    </div>


                </div>
            </div>


        </div>
        <div class="col-sm-12 col-md-12 background-color-fff margin-top-bottom-3" ng-show="isShowingReview($index) && divVisibiltyModel.showSummary&&!task.IsApplied">
            <div class="col-md-6 col-md-offset-3 extend-data no-padding dark-grey-blue">
                <div class="col-md-12 margin-top-20 no-padding text-center margin-top-bottom-3 margin-top-25"><h2>Permission required!</h2></div>
                <div class="col-md-12 font-size-16 opacity-normal text-center margin-bottom-20">
                    <div>You have requested to be assigned for <span class="color-8e44ad">{{task.TaskName}}</span> under project <span class="color-8e44ad">{{task.ProjectName}}</span> for {{task.Hours}} hrs starting {{task.OnBoardingDate}}.</div>
                    <div>You would require your manager’s approval to proceed.<br />Initiate a permission request for the same.</div>

                </div>
                <form name="applicationForm{{$index}}" target="apply{{task.TaskName}}{{$index}}">
                    <div class="col-md-12 no-padding margin-top-20 no-padding">
                        <div class="col-md-5 font-size-14 bold">
                            Manager's Email Id:
                            <span class="requiredField">*</span>
                        </div>
                        <div class="no-padding col-md-7 text-left">
                            <input type="email" name="managerEmail" class="form-control" ng-pattern="/^[A-Za-z0-9!#$%&'*+/=?^_`{|}~.-]+@("@")deloitte\.com$/i" placeholder="xxxxx@deloitte.com" ng-model="managersEmailId" required>
                            <span class="help-inline fontSize10 requiredField" ng-show="applicationForm{{$index}}.managerEmail.$invalid && !applicationForm{{$index}}.managerEmail.$pristine">Required</span>
                            <span class="help-inline fontSize10 requiredField" ng-show="applicationForm{{$index}}.managerEmail.$error.pattern">Invalid email</span>
                        </div>
                    </div>
                    <div class="col-md-12 no-padding margin-top-20 no-padding">
                        <div class="col-md-5 font-size-14 bold">
                            Statement Of Purpose:
                        </div>
                        <div class="no-padding col-md-7 text-left">
                            <textarea rows="5" cols="50" class="form-control" style="resize:none" ng-model="statementOfPurpose"></textarea>
                        </div>
                    </div>
                    <div class="col-md-12 margin-top-20 text-center margin-bottom-40">
                        <button class="review-app-btn col-md-offset-1" type="button" ng-click="cancelPermission()">Cancel</button>
                        <button class="review-app-btn col-md-offset-1" type="submit" ng-disabled="applicationForm{{$index}}.$invalid" name="apply{{task.TaskName}}{{$index}}" ng-click="applyTask(task, managersEmailId,
                                statementOfPurpose);">Request Permission</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="con-new-task-box background-color-fff col-md-12 margin-top-25" ng-show="(tasksCount < 3) && divVisibiltyModel.showApply">
        <h3 class="dark-grey-blue font-size-24 col-md-4 col-md-offset-2">Want to apply for more tasks?</h3>
        <div class="add-task-button col-md-2" ng-click="NavigateToProfile()">EXPAND YOUR SKILLSET</div>
    </div>
</div>
